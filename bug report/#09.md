# 9, CBMC, unconfirmed pointer related bug

Me:
```
#include <math.h>
#include <stdlib.h>
#include <assert.h>
#include <stddef.h>
#include <stdio.h>
#include <sys/mman.h>
#ifndef MAP_ANONYMOUS
#define MAP_ANONYMOUS MAP_ANON
#endif
#ifndef MAP_ANON
#define MAP_ANON 0
#endif
#ifndef MAP_FAILED
#define MAP_FAILED ((void *)-1)
#endif

__attribute__((noipa)) void foo(char *p, char *q, int r) {
  char a = q[0];
  
  if (r || a == '\0') {
    return;
  }
  char b = q[1];
  assert(a == 'a');
  assert(b == 'b');
  
  p[0] = a;
  p[1] = b;
}

int main() {
  char *p = mmap(NULL, 131072, PROT_READ | PROT_WRITE, MAP_PRIVATE | MAP_ANONYMOUS, -1, 0);
  if (p == MAP_FAILED) {
    return 0;
  }
  if (munmap(p + 65536, 65536) < 0) {
    return 0;
  }
	
  p[0] = 'c';
  p[1] = 'd';
  p[65536 - 2] = 'a';
  p[65536 - 1] = 'b';
  volatile int r = 0;
  
  foo(p, p + 65536 - 2, r);
  if (p[0] != 'a' || p[1] != 'b') {
    abort();
  }
  return 0;
}
```
CBMC version: 5.88.0
Operating system: Ubuntu 22.04, MacOS
command line: cbmc example.c --pointer-check

What happened:
```
line 18 dereference failure: deallocated dynamic object in q[(signed long int)0]: FAILURE
line 27 dereference failure: deallocated dynamic object in p[(signed long int)0]: FAILURE
```
But if you comment out the following code in the main function, there are no such FAILURE.
```
if (munmap(p + 65536, 65536) < 0) {
    return 0;
}
```
